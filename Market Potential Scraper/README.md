# 短剧引进片单市场潜力评估工具 (Market Potential Scraper)

## 一、项目背景与目标

### 1. 背景
公司近期采购了 9 部国产短剧的海外发行权。为了最大化 ROI，我们需要决定这 9 部剧的上架顺序和投放评级。

### 2. 核心痛点
目前仅有剧名和内容，缺乏该剧（或同名/同题材剧）在海外市场的历史表现数据。盲目上线可能导致资源错配（S级资源投了B级剧）。

### 3. 目标
开发一个 Python 脚本，通过调用 ADX 的接口或爬虫，抓取这 9 部剧在海外市场的历史投放数据，量化其市场潜力。

---

## 二、核心功能流程 (User Flow)

### 1. Input (输入)
9部剧的中文名

### 2. Process (处理)
- **步骤 1**: 脚本在 ADX 平台搜索剧名关键词
- **步骤 2**: 识别出投放过该剧的所有竞品 APP (Publisher)
- **步骤 3**: 抓取指定时间窗口（近30天 & 近2年）的核心投放数据
- **步骤 4**: 聚合清洗数据，计算"热度得分"

### 3. Output (输出)
生成《9部剧市场潜力分析报告.xlsx》，包含数据透视表和排名建议。

---

## 三、数据需求详解 (Data Requirements)

### 3.1 基础抓取维度 (必须包含)

对于每一部剧，需抓取以下两个时间窗口的数据：
- **窗口 A (近期热度)**: 过去 30 天
- **窗口 B (生命周期)**: 过去 2 年

#### 核心指标

| 维度 | 字段名 | 说明 | 用途 |
|------|--------|------|------|
| **曝光量** | Impressions | 该剧素材的总曝光次数 | 判断市场热度 |
| **素材数量** | Creative Count | 投放过的素材总数 | 判断竞品投入力度 |
| **投放天数** | Active Days | 有投放记录的天数 | 判断生命周期 |
| **投放国家数** | Country Count | 覆盖的国家/地区数量 | 判断市场广度 |
| **投放平台数** | Publisher Count | 投放过该剧的 APP 数量 | 判断竞争激烈度 |

### 3.2 高价值维度（按优先级从高到低）

为了更精准决策，追加以下维度：

#### 1. 竞品归因 (Publisher Analysis)
- **字段**: 投放过该剧的 APP 名称 (如 ReelShort, DramaBox, FlexTV)
- **价值**:
  - 如果 ReelShort 投过且跑量很大，说明是 S 级剧
  - 如果是小 APP 投的，数据可能被低估
  - 排查版权风险，如果有竞品正在大力推，我们需要评估是否撞车或有版权纠纷

#### 2. 生命周期 (Lifecycle Duration)
- **字段**: 首次投放时间 - 最后一次投放时间 的天数
- **价值**:
  - 如果一部剧跑了 180 天还在跑，说明 LTV 极高，是常青树，优先级调至最高
  - 如果只跑了 7 天就停了，说明是一波流，需谨慎

#### 3. 素材存活率 (Creative Survival Rate)
- **字段**: 投放超过 7 天的素材比例
- **价值**: 判断该剧是否有"爆款素材"支撑

> **注意**: 维度 2 或 3 如果不好抓取，优先级可放低

---

## 四、输出报表模版 (Excel Column Definition)

脚本最终生成的 Excel 应包含以下列：

### 表1：基础数据表

#### 窗口 A (近期热度): 过去 30 天，逐日的以下数据

| 列名 | 说明 | 示例 |
|------|------|------|
| 剧名 | 中文剧名 | 《回家的诱惑》 |
| 日期 | 数据日期 | 2024-12-01 |
| 曝光量 | 当日曝光次数 | 1,234,567 |
| 素材数 | 当日活跃素材数 | 45 |
| 投放国家数 | 当日覆盖国家数 | 12 |
| 投放平台数 | 当日投放的 APP 数量 | 3 |
| 主要投放平台 | Top 3 平台名称 | ReelShort, DramaBox |

#### 窗口 B (生命周期): 过去 2 年

上述表格的总数汇总

| 列名 | 说明 | 示例 |
|------|------|------|
| 剧名 | 中文剧名 | 《回家的诱惑》 |
| 总曝光量 | 2年累计曝光 | 50,000,000 |
| 总素材数 | 2年累计素材数 | 320 |
| 投放天数 | 有投放记录的天数 | 180 |
| 首次投放日期 | 最早投放日期 | 2023-06-15 |
| 最后投放日期 | 最近投放日期 | 2024-12-20 |
| 生命周期(天) | 首次到最后的天数 | 554 |
| 覆盖国家总数 | 累计覆盖国家数 | 25 |
| 投放平台总数 | 累计投放平台数 | 8 |

### 表2：数据聚合表

| 列名 | 说明 | 计算公式 |
|------|------|----------|
| 剧名 | 中文剧名 | - |
| 近30天曝光量 | 窗口A总和 | SUM(窗口A.曝光量) |
| 2年总曝光量 | 窗口B总和 | SUM(窗口B.曝光量) |
| 生命周期(天) | 投放时长 | 最后投放日期 - 首次投放日期 |
| 热度得分 | 综合评分 | 见下方公式 |
| 主要投放平台 | Top 3平台 | 按曝光量排序 |
| 优先级建议 | S/A/B/C | 基于决策逻辑 |

#### 热度得分计算公式（参考）

```
热度得分 = (近30天曝光量 × 0.4) + (2年总曝光量 × 0.3) + (生命周期天数 × 0.2) + (投放平台数 × 0.1)
```

> 可根据实际业务需求调整权重

---

## 五、技术实现建议 (Technical Notes)

给技术同学的特别说明：

### 1. 搜索策略 (Fuzzy Search)

由于中国剧出海会被改名（例如《回家的诱惑》可能变成 Temptation of Home 或 Fatal Wife），脚本不能只搜中文。

**建议方案**：
- 脚本需接入一个简单的翻译接口或借助 LLM 的翻译能力
- 自动生成 3-5 个英文关键词组合进行模糊搜索
- 支持多语言搜索（英文、韩文、日文等主要市场语言）

### 2. 数据源

- 主要数据源：ADX 平台 API 或爬虫
- 备选方案：如果 ADX 限制严格，考虑其他广告情报平台

### 3. 输出格式

- Excel 文件格式：`.xlsx`
- 包含多个工作表：
  - Sheet 1: 近30天逐日数据
  - Sheet 2: 2年生命周期汇总
  - Sheet 3: 数据聚合与排名建议

---

## 六、决策逻辑 (Decision Logic)

拿到数据后，按照以下逻辑定优先级：

### 优先级 S (蓝海爆款)

**特征**：
- ADX 无记录或记录较少（或者仅有盗版搬运，无正规军投放）
- 题材符合当前大盘热点（如复仇/狼人）

**策略**：
- 重资源首发
- 抢占市场先机
- 投入 S 级营销资源

### 优先级 A (验证过的好剧)

**特征**：
- ADX 有记录，且 2年累计曝光量极高
- 生命周期 > 90天
- 但近30天热度低（竞品已停投或减少投放）

**策略**：
- 市场已验证其吸量能力，且目前竞品已停投
- 可以利用我们的剪辑能力做"老剧翻红"
- 投入 A 级资源，重新包装上线

### 优先级 B (观望剧)

**特征**：
- ADX 有一定记录，但数据表现平平
- 生命周期 30-90天
- 曝光量中等，无明显爆款特征

**策略**：
- 作为补充片单，排期靠后
- 投入 B 级资源测试
- 根据初期数据决定是否加大投入

### 优先级 C (红海/烂剧)

**特征**：
- **情况1 - 红海竞争**：ADX 显示近30天曝光量巨大（竞品正在猛砸）
- **情况2 - 一波流烂剧**：历史数据显示生命周期 < 14天

**策略**：
- **红海剧**：避其锋芒，稍后上架，等竞品热度过后再考虑
- **烂剧**：降低评级，仅做填充内容，最小资源投入测试

### 决策矩阵总结

| 优先级 | 2年曝光量 | 近30天曝光量 | 生命周期 | 投放策略 |
|--------|-----------|--------------|----------|----------|
| **S** | 无/极低 | 无/极低 | - | 蓝海首发，重资源 |
| **A** | 极高 | 低 | >90天 | 老剧翻红，A级资源 |
| **B** | 中等 | 中等 | 30-90天 | 补充片单，B级资源 |
| **C** | 高/低 | 极高 | <14天 | 避开红海/降级填充 |

---

## 七、项目交付物 (Deliverables)

1. **Python 脚本**：`market_potential_scraper.py`
2. **配置文件**：`config.json`（包含剧名列表、API密钥等）
3. **输出报告**：`9部剧市场潜力分析报告.xlsx`
4. **使用文档**：本 README.md

---

## 八、使用示例 (Usage Example)

```bash
# 安装依赖
pip install -r requirements.txt

# 运行脚本
python market_potential_scraper.py --input dramas.txt --output report.xlsx

# 指定时间窗口
python market_potential_scraper.py --recent-days 30 --lifecycle-days 730
```

---

## 九、注意事项 (Important Notes)

1. **数据准确性**：ADX 数据可能存在延迟或不完整，建议结合多个数据源交叉验证
2. **版权风险**：如发现竞品大量投放，需核实版权归属，避免侵权纠纷
3. **市场动态**：短剧市场变化快，建议定期更新数据（每周或每月）
4. **隐私合规**：爬虫需遵守 robots.txt 和相关法律法规
5. **API限制**：注意 ADX API 的调用频率限制，避免被封禁

---

## 十、后续优化方向 (Future Enhancements)

1. **自动化监控**：定期自动抓取数据，生成趋势报告
2. **竞品分析**：深入分析竞品的投放策略和素材创意
3. **预测模型**：基于历史数据，预测剧集的市场表现
4. **可视化仪表板**：开发 Web 界面，实时展示数据分析结果
5. **多平台支持**：扩展到 Facebook、TikTok 等其他广告平台

---

## 十一、快速开始指南 (Quick Start)

### 1. 环境准备

```bash
# 克隆或进入项目目录
cd "Market Potential Scraper"

# 安装 Python 依赖
pip install -r requirements.txt

# 安装 Playwright 浏览器
playwright install chromium
```

### 2. 配置账号

复制环境变量示例文件并配置 DataEye 账号：

```bash
cp .env.example .env
```

编辑 `.env` 文件，填入你的 DataEye 账号信息：

```env
DATAEYE_USERNAME=your_email@example.com
DATAEYE_PASSWORD=your_password_here
```

### 3. 运行爬虫

```bash
# 运行 DataEye 爬虫（会自动打开浏览器）
python dataeye_scraper.py
```

### 4. 爬虫工作流程

脚本会自动执行以下步骤：

1. ✅ 启动浏览器
2. ✅ 登录 DataEye 平台（首次需要手动登录，之后自动使用 Cookie）
3. ✅ 访问短剧素材页面：`https://oversea-v2.dataeye.com/playlet/playlet-material`
4. ✅ 点击"海外短剧版本"
5. ✅ 在搜索框输入短剧名称
6. ✅ 点击搜索按钮
7. ✅ 提取搜索结果数据
8. ✅ 保存结果为 JSON 文件和截图

### 5. 输出文件

运行完成后会生成：

- `dataeye_results_YYYYMMDD_HHMMSS.json` - 搜索结果数据
- `screenshots/search_剧名_YYYYMMDD_HHMMSS.png` - 搜索结果截图
- `dataeye_cookies.json` - 登录 Cookie（自动生成，下次自动登录）
- `dataeye_scraper.log` - 运行日志

### 6. 自定义剧集列表

编辑 `dramas.json` 文件来配置要搜索的短剧：

```json
{
  "dramas": [
    {
      "name": "回家的诱惑",
      "english_name": "Temptation of Home",
      "priority": "unknown"
    }
  ]
}
```

### 7. 常见问题

**Q: 首次运行需要手动登录吗？**
A: 是的。如果没有配置账号密码，或者 Cookie 失效，程序会打开浏览器让你手动登录。登录后按回车继续，Cookie 会自动保存。

**Q: 如何查看爬取日志？**
A: 查看 `dataeye_scraper.log` 文件，或者直接在终端查看实时输出。

**Q: 爬虫找不到"海外短剧版本"按钮怎么办？**
A: 检查截图确认页面状态，可能需要调整选择器。联系开发者获取支持。

**Q: 数据提取为空怎么办？**
A: 检查短剧名称是否正确，尝试使用英文名称搜索，或查看截图确认是否真的没有数据。

### 8. 项目文件结构

```
Market Potential Scraper/
├── dataeye_scraper.py      # 主爬虫脚本（新）
├── dramas.json             # 剧集配置文件
├── requirements.txt        # Python 依赖
├── .env.example           # 环境变量示例
├── .env                   # 环境变量配置（需自行创建）
├── README.md              # 项目文档
├── CLAUDE.md              # Claude 指令文档
├── screenshots/           # 截图目录（自动创建）
├── dataeye_cookies.json   # Cookie 缓存（自动生成）
└── dataeye_scraper.log    # 运行日志（自动生成）
```

